<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edward Brown - Demos</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Add this to ensure the game container is visible */
        #game-container {
            width: 500px;
            height: 500px;
            margin: 0 auto;
            border: 2px solid red;
            background-color: #f0f0f0;  /* Light gray background */
            position: relative;
        }
        #pyjsdl-canvas {
            display: block;
            margin: 0 auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
        }
    </style>
</head>
<body>
    <header>
        <h1>Interactive Demos</h1>
        <nav>
            <ul>
                <li><a href="index.html">Return to Portfolio</a></li>
            </ul>
        </nav>
    </header>

    <section id="demos">
        <h2>Demos</h2>
        <div class="demo-grid">
            <div class="demo-tile">
                <h3>Isometric Building Game</h3>
                <div id="game-container">
                    <canvas id="pyjsdl-canvas"></canvas>
                    <div id="loading-indicator" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                        Loading game...
                    </div>
                </div>
                <p>A simple Isometric building game with controllable camera and building mechanics.</p>
                <div class="controls-info">
                    <p><strong>Controls:</strong></p>
                    <ul>
                        <li>WASD - Move player</li>
                        <li>Arrow keys - Move camera</li>
                        <li>To build - left click</li>
                        <li>To move up - space bar</li>
                        <li>To move down - shift key</li>
                        <li>To swap material - press 1, 2 or 3</li>
                    </ul>
                </div>
            </div>
            <!-- Add more demo tiles as needed -->
        </div>
        <button class="return-button" onclick="window.location.href='index.html'">Return to Portfolio</button>
    </section>

    <!-- Modal container -->
    <div id="demoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-info">
                    <p>Press 'Esc' key or the Close button to exit the demo</p>
                    <p><strong>Controls:</strong></p>
                    <ul>
                        <li>WASD - Move player</li>
                        <li>Arrow keys - Move camera</li>
                        <li>To build - left click</li>
                        <li>To move up - space bar</li>
                        <li>To move down - shift key</li>
                        <li>To swap material - press 1, 2 or 3</li>
                    </ul>
                </div>
                <button onclick="closeDemo()" class="close-button">Close Demo</button>
            </div>
            <div id="demoContainer"></div>
        </div>
    </div>

    <!-- Add PyJSDL scripts -->
    <script src="https://cdn.jsdelivr.net/npm/pyjsdl@latest/pyjsdl.js"></script>
    <script>
        console.log("Script starting...");
        window.onload = function() {
            console.log("Window loaded");
            try {
                console.log("Initializing PyJSDL");
                PyJSDL.init("pyjsdl-canvas", {
                    width: 500,
                    height: 500,
                    backgroundColor: '#ffffff'  // White background to see if canvas is created
                });
                console.log("PyJSDL initialized");
                
                // Add error handler
                PyJSDL.onerror = function(error) {
                    console.error("PyJSDL error:", error);
                };
                
                console.log("Loading game from:", "isopythondemo/iso6c.py");
                PyJSDL.load("isopythondemo/iso6c.py").then(() => {
                    console.log("Game loaded successfully");
                }).catch(error => {
                    console.error("Failed to load game:", error);
                });
            } catch (e) {
                console.error("Setup error:", e);
            }
        }

        function openDemo(demoUrl) {
            const modal = document.getElementById('demoModal');
            const demoContainer = document.getElementById('demoContainer');
            
            const iframe = document.createElement('iframe');
            iframe.src = demoUrl;
            iframe.width = "800";
            iframe.height = "600";
            iframe.frameBorder = "0";
            iframe.allowFullscreen = true;
            iframe.allow = "keyboard-map *";
            iframe.tabIndex = "1";
            
            demoContainer.innerHTML = '';
            demoContainer.appendChild(iframe);
            
            modal.style.display = 'block';
            
            setTimeout(() => {
                iframe.focus();
            }, 100);
        }

        function closeDemo() {
            const modal = document.getElementById('demoModal');
            const demoContainer = document.getElementById('demoContainer');
            
            demoContainer.innerHTML = '';
            modal.style.display = 'none';
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeDemo();
            }
        });
    </script>
</body>
</html> 